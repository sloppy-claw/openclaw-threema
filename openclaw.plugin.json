{
  "id": "threema",
  "name": "Threema Gateway",
  "version": "0.1.0",
  "description": "Privacy-focused messaging via Threema Gateway with E2E encryption",
  "channels": ["threema"],
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "enabled": {
        "type": "boolean"
      },
      "apiId": {
        "type": "string",
        "description": "Threema Gateway API identity (8 chars, starts with *)",
        "pattern": "^\\*[A-Z0-9]{7}$"
      },
      "apiSecret": {
        "type": "string",
        "description": "Threema Gateway API secret"
      },
      "privateKey": {
        "type": "string",
        "description": "64-char hex private key for E2E mode"
      },
      "mode": {
        "type": "string",
        "enum": ["e2e", "basic"],
        "default": "e2e",
        "description": "Encryption mode (e2e recommended)"
      },
      "webhookPath": {
        "type": "string",
        "default": "/threema-webhook",
        "description": "Webhook path for incoming messages"
      },
      "dmPolicy": {
        "type": "string",
        "enum": ["open", "pairing", "allowlist"],
        "default": "pairing"
      },
      "allowFrom": {
        "type": "array",
        "items": { "type": "string" },
        "description": "Allowed Threema IDs (for allowlist policy)"
      }
    },
    "required": []
  },
  "uiHints": {
    "apiId": {
      "label": "Gateway ID",
      "placeholder": "*MYID123"
    },
    "apiSecret": {
      "label": "API Secret",
      "sensitive": true
    },
    "privateKey": {
      "label": "Private Key (E2E mode)",
      "sensitive": true,
      "help": "64-char hex key for end-to-end encryption"
    },
    "mode": {
      "label": "Encryption Mode"
    },
    "dmPolicy": {
      "label": "DM Policy"
    },
    "allowFrom": {
      "label": "Allowed Threema IDs"
    }
  }
}
